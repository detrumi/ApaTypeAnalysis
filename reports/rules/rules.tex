\documentclass[10pt]{article}
\usepackage{hyperref}
\usepackage{mathpartir}
\usepackage{amsmath}

\newcommand{\keyw}[1]{\textrm{\textbf{#1}}}

\newcommand{\GammaH}{\widehat{\Gamma}}
\newcommand{\tauH}{\widehat{\tau}}
\newcommand{\sigmaH}{\widehat{\sigma}}

% houtje touwtje manier om typwerk te besparen
\newcommand{\trule}[3]{
	\begin{mathpar}
		\inferrule
			{#1}
			{#2}
			\hspace{1cm}
			{\keyw{[#3]}}
	\end{mathpar}
}

% provides Gamma |- CFA
\newcommand{\GCFA}{\GammaH \vdash_{CFA}}

\newcommand{\letin}[2]{\keyw{~let~} #1 \keyw{~in~} #2}
\newcommand{\lam}[2]{\keyw{~$\lambda$} #1 \rightarrow #2} % Is dit handig met die rightarrow als scheiding voor een lambda?
\newcommand{\ife}[3]{\keyw{~if~} #1 \keyw{~then~} #2 \keyw{~else~} #3}
\newcommand{\case}[3]{\keyw{~case~} #1 \keyw{~of \{~} #2 \rightarrow #3 \keyw{~\};~}}
\newcommand{\app}[2]{#1 ~ #2}
\newcommand{\con}[2]{#1 ~ #2}
\newcommand{\infix}[3]{#1 ~ #2 ~ #3}

\begin{document}

% TODO: checken van alles, want volgens mij klopt het nog niet allemaal
% TODO: waarom die hat op Gamma, moet er ook een hat op \tauH?
% TODO: wat moeten we met UL, moet dit nog CFA worden?

Below follows the annotated type system and its judgements.

% TODO: dit moet nog gemaakt worden, is maar half af / kloppend
\begin{table}[htp]
\centering
\begin{tabular}{llll}
$\varphi$ & $\in$   & \textbf{Ann}                           & annotations\\
$\tauH$   & $\in$   & $\widehat{\textrm{\textbf{Type}}}$     & annotated types\\
$\sigmaH$ & $\in$   & $\widehat{\textrm{\textbf{TyScheme}}}$ & annotated type schemes\\
$\GammaH$ & $\in$   & $\widehat{\textrm{\textbf{TyEnv}}}$    & annotated type enviroments\\
\end{tabular}
\end{table}

\begin{align*}
\tauH   &::= \alpha ~|~ Int ~|~ Double ~|~ Bool ~|~ \tauH_1 \rightarrow \tauH_2\\
\varphi &::= \tauH ~|~ \forall \alpha. \tauH_1\\
\GammaH &::= [] ~|~ \GammaH_1[x \mapsto \sigmaH]\\
\end{align*}


% Const
\trule
	{ }
	{\GCFA c : \tauH}
	{cfa-const}

% Var
\trule
	{\GammaH (x) : \tauH}
	{\GCFA x = v : \tauH}
	{cfa-var}

% Let
\trule
	{\GCFA e_1 : \tauH_1 \\ \GammaH[x \mapsto \tauH_1] \vdash e_2 : \tauH}
	{\GCFA \letin{x = e_1}{e_2} : \tauH}
	{cfa-let}

% Lam
\trule
	{\GCFA x : \tauH_1 \\ \GCFA e : \tauH_2}
	{\GCFA \lam{x}{e} : \tauH_1 \rightarrow \tauH_2}
	{cfa-lam}

% App
\trule
	{\GCFA f : \tauH_1 \rightarrow \tauH_2 \\ \GCFA e : \tauH_1}
	{\GCFA \app{f}{e} : \tauH_2}
	{cfa-app}

% If
\trule
	{\GCFA e_1 : Bool \\ \GCFA e_2 : \tauH \\ \GCFA e_3 : \tauH}
	{\GCFA \ife{e_1}{e_2}{e_3} : \tauH}
	{cfa-if}

% Case
\trule
	{\GCFA e_1 : \tauH_1 \\ \GCFA e_2 : \tauH_1 \\ \GCFA e_3 : \tauH_2}
	{\GCFA \case{e_1}{e_2}{e_3} : \tauH_2}
	{cfa-case}

% TODO klopt volgens mij nog niet
% Con
\trule
	{\GCFA e : \tauH_1 \\ \GammaH [c \mapsto \tauH_2]}
	{\GCFA \con{c}{e} : \tauH_2}
	{cfa-con}

% Infix
\trule
	{\GCFA e_1 : \tauH_1 \\ \GCFA f : \tauH_1 \rightarrow \tauH_2 \\ \GCFA e_2 : \tauH_2}
	{\GCFA \infix{e_1}{f}{e_2} : \tauH_2}
	{cfa-infix}

\end{document}
